<Window x:Class="FiniteStateMachine.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:graphsharp="clr-namespace:GraphSharp.Controls;assembly=GraphSharp.Controls"
        xmlns:zoom="clr-namespace:WPFExtensions.Controls;assembly=WPFExtensions"
        xmlns:local="clr-namespace:FiniteStateMachine.Graph"
        xmlns:tree="clr-namespace:GraphSharp.Algorithms.Layout.Simple.Tree;assembly=GraphSharp"
        Title="MainWindow" Height="780" Width="1500">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="auto"/>
        </Grid.ColumnDefinitions>

        <Grid.Resources>

            <local:ActiveConverter x:Key="activeConverter"/>

            <DataTemplate DataType="{x:Type local:CustomVertex}">

                <Border  Background="{Binding Path=Active, Converter={StaticResource activeConverter}, NotifyOnTargetUpdated=True}"

					BorderBrush="LightGray" 

					BorderThickness="1,1,1,1"

					CornerRadius="10,10,10,10"

					Padding="10,10,10,10"

					HorizontalAlignment="Center"

					VerticalAlignment="Center"

					Cursor="Hand">

                    <Border.ContextMenu>

                        <ContextMenu>

                            <MenuItem x:Name="Change" Click="MenuItem_Click" Tag="{Binding}">

                                <MenuItem.Header>

                                    <TextBlock HorizontalAlignment="Left">Change</TextBlock>

                                </MenuItem.Header>

                            </MenuItem>

                        </ContextMenu>

                    </Border.ContextMenu>

                    <Border.ToolTip>

                        <ToolTip>

                            <TextBlock Text="{Binding Text}" />

                        </ToolTip>

                    </Border.ToolTip>

                    <TextBlock Text="{Binding Text}" TextAlignment="Center" TextWrapping="Wrap" />

                </Border>

            </DataTemplate>

        </Grid.Resources>

        <zoom:ZoomControl Name="zoomControl" Grid.Column="0" Margin="0,0,355,0">
            <graphsharp:GraphLayout x:Name="graphLayout"
                                Graph="{Binding Path=Graph,Mode=TwoWay}"
                                LayoutAlgorithmType="ISOM"
                                OverlapRemovalAlgorithmType="FSM"
                                HighlightAlgorithmType="Simple" Margin="-12,0,-15,0"
                                    
                                   >
            </graphsharp:GraphLayout>

        </zoom:ZoomControl>

        <Button Content="Represent state machine" Click="Show_Graph" Margin="1158,10,10,702"/>
        <TextBlock Grid.Column="1" Grid.Row="1"></TextBlock>
        <TextBlock  HorizontalAlignment="Left" Margin="1158,131,0,0" TextWrapping="Wrap" Name="console" VerticalAlignment="Top" Height="579" Width="324"/>
        <ComboBox   Name="cmbBox" FontSize="14" FontFamily="Arial"  HorizontalAlignment="Left" Margin="1158,53,0,0" VerticalAlignment="Top" Width="324" Height="37" ItemsSource="{Binding Path=Sequences}" DisplayMemberPath="Name" SelectionChanged="cmbBox_SelectionChanged" >
        </ComboBox>
    </Grid>
</Window>
