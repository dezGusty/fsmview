<?xml version="1.0" encoding="utf-8"?>
<FSMSequenceConfig>
	<ArrayOfSequence>
		<FSMSequence>
			<Name>deploy_project</Name>
			<Description>Deploying project</Description>
			<FinalDescription>Running</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>check_target_ds</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>check_support_ds</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>check_target_winccoa_ver</Name>
					<Weight>1</Weight>
				</FSMStep>

        <!-- optional step for in-->
        <FSMStep>
          <Name>target.do_online_backup</Name>
          <Weight>1</Weight>
        </FSMStep>

        <FSMStep>
					<Name>create_config_file_on_db_svr</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.get_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.remove_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.checkout_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.grant_file_access</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.generate_project_config_files</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.put_config_files_to_repo</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.remove_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>create_config_file_on_db_svr_finished</Name>
					<Weight>1</Weight>
				</FSMStep>

				<FSMStep>
					<Name>db.get_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.checkout_plant_topo_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.grant_plant_dir_file_access</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.generate_plant_topo_item</Name>
					<Weight>1</Weight>
          <TimeoutInSeconds>1800</TimeoutInSeconds>
        </FSMStep>
				<FSMStep>
					<Name>db.put_plant_topo_files_to_repo</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.remove_temp_plant_topo_dir</Name>
					<Weight>1</Weight>
				</FSMStep>

				<FSMStep>
					<Name>target.stop_project_if_running</Name>
					<Weight>2</Weight>
				</FSMStep>
				<FSMStep>
					<Name>target.get_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>target.remove_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>target.checkout_plant_topo_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>vcs_checkout_project</Name>
					<Weight>2</Weight>
				</FSMStep>
				<FSMStep>
					<Name>update_vcs_ignore_list</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>update_config_files</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>set_up_project</Name>
					<Weight>8</Weight>
				</FSMStep>
				<FSMStep>
					<Name>start_project</Name>
					<Weight>4</Weight>
				</FSMStep>
				<FSMStep>
					<Name>import_ascii_files</Name>
					<Weight>4</Weight>
					<TimeoutInSeconds>300</TimeoutInSeconds>
				</FSMStep>
				<FSMStep>
					<Name>target.import_plant_topology_items</Name>
					<Weight>10</Weight>
					<TimeoutInSeconds>600</TimeoutInSeconds>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>deploy_client</Name>
			<Description>Deploying client project</Description>
			<FinalDescription>Deployed</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>check_target_ds</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>check_support_ds</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>check_target_winccoa_ver</Name>
					<Weight>1</Weight>
				</FSMStep>

				<FSMStep>
					<Name>create_config_file_on_db_svr</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.get_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.remove_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.checkout_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.grant_file_access</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.generate_project_config_files</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.put_config_files_to_repo</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.remove_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>create_config_file_on_db_svr_finished</Name>
					<Weight>1</Weight>
				</FSMStep>

				<FSMStep>
					<Name>target.stop_project_if_running</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>vcs_checkout_project</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>update_vcs_ignore_list</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>update_config_files</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>set_up_project</Name>
					<Weight>1</Weight>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>update_client</Name>
			<Description>Deploying client project</Description>
			<FinalDescription>Deployed</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>check_target_ds</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>check_target_winccoa_ver</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>vcs_checkout_project</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>update_vcs_ignore_list</Name>
					<Weight>1</Weight>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>install_patch</Name>
			<Description>Install patches on target machine</Description>
			<FinalDescription>Installed</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>check_target_ds</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>kill_wccoa_target</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>vcs_checkout_patch</Name>
					<Weight>5</Weight>
					<TimeoutInSeconds>600</TimeoutInSeconds>
				</FSMStep>
				<FSMStep>
					<Name>extract_patch_file</Name>
					<Weight>10</Weight>
					<TimeoutInSeconds>1800</TimeoutInSeconds>
				</FSMStep>
				<FSMStep>
					<Name>install_patch_file</Name>
					<Weight>20</Weight>
					<TimeoutInSeconds>4000</TimeoutInSeconds>
				</FSMStep>
				<FSMStep>
					<Name>remove_patch_dir_target</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>installed_patch_version_target</Name>
					<Weight>1</Weight>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>extract_patch</Name>
			<Description>Extract patches on target machine</Description>
			<FinalDescription>Extracted</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>check_target_ds</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>vcs_checkout_patch</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>extract_patch_file</Name>
					<Weight>1</Weight>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>create_import_ascii</Name>
			<Description>Creating-importing ASCII</Description>
			<FinalDescription>Imported ASCII</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>check_target_ds</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>check_support_ds</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>check_target_winccoa_ver</Name>
					<Weight>1</Weight>
				</FSMStep>

				<FSMStep>
					<Name>db.get_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.checkout_plant_topo_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.grant_plant_dir_file_access</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.generate_plant_topo_item</Name>
					<Weight>1</Weight>
          <TimeoutInSeconds>1800</TimeoutInSeconds>
        </FSMStep>
				<FSMStep>
					<Name>db.put_plant_topo_files_to_repo</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.remove_temp_plant_topo_dir</Name>
					<Weight>1</Weight>
				</FSMStep>

				<FSMStep>
					<Name>target.get_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>target.checkout_plant_topo_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>start_project</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>target.import_plant_topology_items</Name>
					<Weight>10</Weight>
					<TimeoutInSeconds>600</TimeoutInSeconds>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>remove_project</Name>
			<Description>Removing project</Description>
			<FinalDescription>Removed</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>check_target_ds</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>target.stop_project_if_running</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>remove_project</Name>
					<Weight>1</Weight>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>update_project</Name>
			<Description>Updating project</Description>
			<FinalDescription>Running</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>check_target_ds</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>check_support_ds</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>check_target_winccoa_ver</Name>
					<Weight>1</Weight>
				</FSMStep>

				<FSMStep>
					<Name>db.get_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.checkout_plant_topo_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.grant_plant_dir_file_access</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.generate_plant_topo_item</Name>
					<Weight>1</Weight>
          <TimeoutInSeconds>1800</TimeoutInSeconds>
        </FSMStep>
				<FSMStep>
					<Name>db.put_plant_topo_files_to_repo</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.remove_temp_plant_topo_dir</Name>
					<Weight>1</Weight>
				</FSMStep>

				<FSMStep>
					<Name>create_config_file_on_db_svr</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.get_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.remove_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.checkout_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.grant_file_access</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.generate_project_config_files</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.put_config_files_to_repo</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>db.remove_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>create_config_file_on_db_svr_finished</Name>
					<Weight>1</Weight>
				</FSMStep>

				<FSMStep>
					<Name>target.stop_project_if_running</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>vcs_update_project</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>update_vcs_ignore_list</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>update_config_files</Name>
					<Weight>1</Weight>
				</FSMStep>

				<FSMStep>
					<Name>target.get_temp_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>target.checkout_plant_topo_dir</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>start_project</Name>
					<Weight>4</Weight>
				</FSMStep>
				<FSMStep>
					<Name>import_ascii_files</Name>
					<Weight>4</Weight>
					<TimeoutInSeconds>300</TimeoutInSeconds>
				</FSMStep>
				<FSMStep>
					<Name>target.import_plant_topology_items</Name>
					<Weight>10</Weight>
					<TimeoutInSeconds>600</TimeoutInSeconds>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>start_project</Name>
			<Description>Starting project</Description>
			<FinalDescription>Running</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>start_project</Name>
					<Weight>1</Weight>
					<TimeoutInSeconds>300</TimeoutInSeconds>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>stop_project</Name>
			<Description>Stopping project</Description>
			<FinalDescription>Stopped</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>stop_project</Name>
					<Weight>1</Weight>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>start_registered_project</Name>
			<Description>Starting reg project</Description>
			<FinalDescription>Running</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>start_registered_project</Name>
					<Weight>1</Weight>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>stop_registered_project</Name>
			<Description>Stopping reg project</Description>
			<FinalDescription>Stopped</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>stop_registered_project</Name>
					<Weight>1</Weight>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>do_online_backup</Name>
			<Description>Run a WinCC OA online backup</Description>
			<FinalDescription>Online backup done</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>check_target_ds</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>target.do_online_backup</Name>
					<Weight>1</Weight>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>get_backups</Name>
			<Description>Reads all stored backups from the target system</Description>
			<FinalDescription>Backups read</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>get_backups</Name>
					<Weight>1</Weight>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>import_online_backup</Name>
			<Description>Imports an existing WinCC OA online backup</Description>
			<FinalDescription>Backup imported</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>check_target_ds</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>target.stop_project_if_running</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>import_online_backup</Name>
					<Weight>1</Weight>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>export_dp_ascii</Name>
			<Description>Exporting DP ascii config</Description>
			<FinalDescription>Exported</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>lcl_export_ascii_files</Name>
					<Weight>1</Weight>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

		<FSMSequence>
			<Name>deploy_subproject</Name>
			<Description>Deploying subproject</Description>
			<FinalDescription>Deployed</FinalDescription>
			<ArrayOfStep>
				<FSMStep>
					<Name>check_target_ds</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>check_target_winccoa_ver</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>vcs_checkout_project</Name>
					<Weight>1</Weight>
				</FSMStep>
				<FSMStep>
					<Name>update_vcs_ignore_list</Name>
					<Weight>1</Weight>
				</FSMStep>
			</ArrayOfStep>
		</FSMSequence>

    <FSMSequence>
      <Name>callup_interface_import</Name>
      <Description>Exports a dpl and runs the import tool to import the data.</Description>
      <FinalDescription>Configuration imported</FinalDescription>
      <ArrayOfStep>
        <FSMStep>
          <Name>check_target_ds</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>callup.checkout_dir</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>lcl_export_ascii_files</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>callup.checkin_ascii</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>check_support_ds</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>callup.checkout_ascii_on_db_server</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>callup.checkout_ascii_on_localhost</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>callup.db_import_ascii</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>callup.callup_link_dps</Name>
          <Weight>1</Weight>
        </FSMStep>
      </ArrayOfStep>
    </FSMSequence>

    <!-- 
    Perform a deployment operation that can be parallelized.
    Note (Augustin Preda, 2015.07.22): this is a workflow that shall be triggered for each individual project on each
    individual host. What will make it different from the regular deployment is that it makes use of different steps. 
    These different steps allow the operation to be parallelized. So they will only run once. 
    -->
    <FSMSequence>
      <Name>deploy_project_parallel</Name>
      <Description>Deploying project (p)</Description>
      <FinalDescription>Running</FinalDescription>
      <ArrayOfStep>
        <FSMStep>
          <Name>check_target_ds</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>check_support_ds</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>check_target_winccoa_ver</Name>
          <Weight>1</Weight>
        </FSMStep>

        <!--create_config_file_on_db_svr_parallel-->
        <FSMStep>
          <Name>create_config_file_on_db_svr</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>db.get_temp_dir</Name>
          <Weight>1</Weight>
        </FSMStep>
        
        <FSMStep>
          <Name>db.remove_temp_config_dirs_multiple</Name>
          <Weight>1</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>
        
        <FSMStep>
          <Name>db.checkout_config_dirs_parallel</Name>
          <Weight>1</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>
        <FSMStep>
          <Name>db.grant_file_access_multiple</Name>
          <Weight>1</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>
        <FSMStep>
          <Name>db.trigger_export_of_cfgs_parallel</Name>
          <Weight>1</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>
        <FSMStep>
          <Name>db.put_config_files_to_repo_multiple</Name>
          <Weight>1</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>
        <FSMStep>
          <Name>db.remove_temp_config_dirs_multiple</Name>
          <Weight>1</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>
        <FSMStep>
          <Name>create_config_file_on_db_svr_finished</Name>
          <Weight>1</Weight>
        </FSMStep>

        <!--export_plant_topo_items_on_db_svr_parallel-->
        <FSMStep>
          <Name>db.get_temp_dir</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>db.remove_temp_dir</Name>
          <Weight>1</Weight>
        </FSMStep>
        
        <FSMStep>
          <Name>db.checkout_plant_topo_dir</Name>
          <Weight>1</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>
        <FSMStep>
          <Name>db.grant_plant_dir_file_access</Name>
          <Weight>1</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>
        <FSMStep>
          <Name>db.generate_plant_topo_items_multiple</Name>
          <Weight>10</Weight>
          <TimeoutInSeconds>5400</TimeoutInSeconds>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>
        <FSMStep>
          <Name>db.put_plant_topo_files_to_repo_multiple</Name>
          <Weight>3</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>
        <FSMStep>
          <Name>db.remove_temp_plant_topo_dir</Name>
          <Weight>1</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>

        <FSMStep>
          <Name>target.stop_project_if_running</Name>
          <Weight>2</Weight>
        </FSMStep>

        <FSMStep>
          <Name>target.do_online_backup</Name>
          <Weight>2</Weight>
        </FSMStep>
        
        <FSMStep>
          <Name>target.get_temp_dir</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>target.remove_temp_dir</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>target.checkout_plant_topo_dir</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>vcs_checkout_project</Name>
          <Weight>2</Weight>
        </FSMStep>
        <FSMStep>
          <Name>update_vcs_ignore_list</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>update_config_files</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>set_up_project</Name>
          <Weight>8</Weight>
        </FSMStep>
        <FSMStep>
          <Name>start_project</Name>
          <Weight>4</Weight>
        </FSMStep>
        <FSMStep>
          <Name>import_ascii_files</Name>
          <Weight>4</Weight>
          <TimeoutInSeconds>300</TimeoutInSeconds>
        </FSMStep>
        <FSMStep>
          <Name>target.import_plant_topology_items</Name>
          <Weight>10</Weight>
          <TimeoutInSeconds>600</TimeoutInSeconds>
        </FSMStep>
      </ArrayOfStep>
    </FSMSequence>

    <FSMSequence>
      <Name>deploy_client_parallel</Name>
      <Description>Deploying client project (p)</Description>
      <FinalDescription>Deployed</FinalDescription>
      <ArrayOfStep>
        <FSMStep>
          <Name>check_target_ds</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>check_support_ds</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>check_target_winccoa_ver</Name>
          <Weight>1</Weight>
        </FSMStep>

        <!--create_config_file_on_db_svr_parallel-->
        <FSMStep>
          <Name>create_config_file_on_db_svr</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>db.get_temp_dir</Name>
          <Weight>1</Weight>
        </FSMStep>

        <FSMStep>
          <Name>db.remove_temp_dir</Name>
          <Weight>1</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>

        <FSMStep>
          <Name>db.checkout_config_dirs_parallel</Name>
          <Weight>1</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>
        <FSMStep>
          <Name>db.grant_file_access_multiple</Name>
          <Weight>1</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>
        <FSMStep>
          <Name>db.trigger_export_of_cfgs_parallel</Name>
          <Weight>1</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>
        <FSMStep>
          <Name>db.put_config_files_to_repo_multiple</Name>
          <Weight>1</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>
        <FSMStep>
          <Name>db.remove_temp_config_dirs_multiple</Name>
          <Weight>1</Weight>
          <SingletonExecution>true</SingletonExecution>
        </FSMStep>
        <FSMStep>
          <Name>create_config_file_on_db_svr_finished</Name>
          <Weight>1</Weight>
        </FSMStep>

        <FSMStep>
          <Name>target.stop_project_if_running</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>vcs_checkout_project</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>update_vcs_ignore_list</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>update_config_files</Name>
          <Weight>1</Weight>
        </FSMStep>
        <FSMStep>
          <Name>set_up_project</Name>
          <Weight>1</Weight>
        </FSMStep>
      </ArrayOfStep>
    </FSMSequence>
  </ArrayOfSequence>
</FSMSequenceConfig>
